/*!
 * EventEmitter v4.2.8 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */

/**
   * To Title Case 2.1 - http://individed.com/code/to-title-case/
   * Copyright 2008-2013 David Gouch. Licensed under the MIT License.
   * https://github.com/gouch/to-title-case
   */

(function(){function e(){}function t(e,t){for(var r=e.length;r--;)if(e[r].listener===t)return r;return-1}function r(e){return function(){return this[e].apply(this,arguments)}}var s=e.prototype,n=this,a=n.EventEmitter;s.getListeners=function(e){var t,r,s=this._getEvents();if(e instanceof RegExp){t={};for(r in s)s.hasOwnProperty(r)&&e.test(r)&&(t[r]=s[r])}else t=s[e]||(s[e]=[]);return t},s.flattenListeners=function(e){var t,r=[];for(t=0;t<e.length;t+=1)r.push(e[t].listener);return r},s.getListenersAsObject=function(e){var t,r=this.getListeners(e);return r instanceof Array&&(t={},t[e]=r),t||r},s.addListener=function(e,r){var s,n=this.getListenersAsObject(e),a="object"==typeof r;for(s in n)n.hasOwnProperty(s)&&-1===t(n[s],r)&&n[s].push(a?r:{listener:r,once:!1});return this},s.on=r("addListener"),s.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},s.once=r("addOnceListener"),s.defineEvent=function(e){return this.getListeners(e),this},s.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},s.removeListener=function(e,r){var s,n,a=this.getListenersAsObject(e);for(n in a)a.hasOwnProperty(n)&&(s=t(a[n],r),-1!==s&&a[n].splice(s,1));return this},s.off=r("removeListener"),s.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},s.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},s.manipulateListeners=function(e,t,r){var s,n,a=e?this.removeListener:this.addListener,i=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(s=r.length;s--;)a.call(this,t,r[s]);else for(s in t)t.hasOwnProperty(s)&&(n=t[s])&&("function"==typeof n?a.call(this,s,n):i.call(this,s,n));return this},s.removeEvent=function(e){var t,r=typeof e,s=this._getEvents();if("string"===r)delete s[e];else if(e instanceof RegExp)for(t in s)s.hasOwnProperty(t)&&e.test(t)&&delete s[t];else delete this._events;return this},s.removeAllListeners=r("removeEvent"),s.emitEvent=function(e,t){var r,s,n,a,i=this.getListenersAsObject(e);for(n in i)if(i.hasOwnProperty(n))for(s=i[n].length;s--;)r=i[n][s],r.once===!0&&this.removeListener(e,r.listener),a=r.listener.apply(this,t||[]),a===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},s.trigger=r("emitEvent"),s.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},s.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},s._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},s._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return n.EventEmitter=a,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}).call(this),function(){var e={serialize:function(e,r,s){s=s||{};var n=s.encode||t,a=[e+"="+n(r)];if(null!=s.maxAge){var i=s.maxAge-0;if(isNaN(i))throw new Error("maxAge should be a Number");a.push("Max-Age="+i)}return s.domain&&a.push("Domain="+s.domain),s.path&&a.push("Path="+s.path),s.expires&&a.push("Expires="+s.expires.toUTCString()),s.httpOnly&&a.push("HttpOnly"),s.secure&&a.push("Secure"),a.join("; ")},parse:function(e,t){t=t||{};var s={},n=e.split(/; */),a=t.decode||r;return n.forEach(function(e){var t=e.indexOf("=");if(!(0>t)){var r=e.substr(0,t).trim(),n=e.substr(++t,e.length).trim();if('"'==n[0]&&(n=n.slice(1,-1)),void 0==s[r])try{s[r]=a(n)}catch(i){s[r]=n}}}),s}},t=encodeURIComponent,r=decodeURIComponent;"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define("cookie-js/cookie",[],function(){return e}):window.cookiejs=e}(),function(e,t){"function"==typeof define&&define.amd?define("analytics",t):"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=t():e.analytics=t()}(this,function(){function e(e){var r=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;return e=t(e),e.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,t,s){return t>0&&t+e.length!==s.length&&e.search(r)>-1&&":"!==s.charAt(t-2)&&("-"!==s.charAt(t+e.length)||"-"===s.charAt(t-1))&&s.charAt(t-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})}function t(e){return e.replace(/^\s+|\s+$/g,"")}function r(e){return/[^@]+@[^@]+/.test(e)}function s(e){console.warn("[analytics] "+e)}function n(e){if("function"==typeof ga){var t={hitType:"event",eventCategory:d,eventAction:e.action};e.label&&(t.eventLabel=e.label),(e.value||0===e.value)&&(t.eventValue=e.value),e.nonInteraction===!0&&(t.nonInteraction=1),ga("send",t)}var r=["_trackEvent",d,e.action];e.label&&(r[3]=e.label),(e.value||0===e.value)&&(r[4]=e.value),e.nonInteraction===!0&&(r[5]=!0),_gaq.push(r)}function a(a,i){i=i||{};var o={},c=i.label,u=i.value,l=i.noninteraction||i.nonInteraction;return a?(r(a)&&(s("`action` arg looks like an email address, redacting."),a=m),o.action=e(a),c&&("string"!=typeof c?s("Expected `label` arg to be a String."):(r(c)&&(s("`label` arg looks like an email address, redacting."),c=m),o.label=t(c))),(u||0===u)&&("number"!=typeof u?s("Expected `value` arg to be a Number."):o.value=0|u),l&&("boolean"!=typeof l?s("Expected `noninteraction` arg to be a Boolean."):o.nonInteraction=l===!0),void n(o)):void s("Expected `action` arg.")}function i(e){return/^\/virtual\//.test(e)?e:(e=e.replace(/^[/]?/,"/"),"/virtual"+e)}function o(e){if("function"==typeof ga){var t={hitType:"pageview",page:e.virtualPagePath};ga("send",t)}var r=["_trackPageview",e.virtualPagePath];_gaq.push(r)}function c(e){if(!e)return void s("Expected `virtualPagePath` arg.");e=t(e);var r={};r.virtualPagePath=i(e),o(r)}function u(e){var t=["trackEvent",e.action];if(e.revenue){var r={revenue:e.revenue};t[2]=r}optimizely.push(t)}function l(e,r){r=r||{};var n={},a=r.valueInCents;return e?(n.action=t(e),a&&("number"==typeof a&&a%1===0?n.revenue=a:s("Expected `valueInCents` arg to be an integer.")),void u(n)):void s("Expected `action` arg.")}this._gaq||(this._gaq=[]),this.optimizely||(this.optimizely=[]);var d=location.hostname,m="REDACTED (Potential Email Address)";return{event:a,virtualPageview:c,conversionGoal:l}}),function(e){function t(t,s,n){return function(a){e.localStorage||console.error("Local storage must be supported for instant login.");var i=this,o={domain:location.hostname.split(".").slice(-2).join("."),path:"/",secure:"https:"===location.protocol,expires:new Date(Date.now()+6048e5)},c=/ref=((?:\w|-)+)/.exec(e.location.search),u=s.parse(document.cookie).webmakerReferral;c&&(c=c[1]),a=a||{},a.paths=a.paths||{},i.emitter=new t,i.host=a.host||"",i.paths=a.paths||{},i.paths.authenticate=a.paths.authenticate||"/authenticate",i.paths.create=a.paths.create||"/create",i.paths.verify=a.paths.verify||"/verify",i.paths.logout=a.paths.logout||"/logout",i.paths.checkUsername=a.paths.checkUsername||"/check-username",i.paths.request=a.paths.request||"/auth/v2/request",i.paths.checkEmail=a.paths.checkEmail||"/auth/v2/check-email",i.paths.createUser=a.paths.createUser||"/auth/v2/create",i.paths.authenticateToken=a.paths.authenticateToken||"/auth/v2/authenticateToken",i.urls={request:i.host+i.paths.request,authenticateToken:i.host+i.paths.authenticateToken,authenticate:i.host+i.paths.authenticate,create:i.host+i.paths.create,createUser:i.host+i.paths.createUser,verify:i.host+i.paths.verify,logout:i.host+i.paths.logout,checkEmail:i.host+i.paths.checkEmail,checkUsername:i.host+i.paths.checkUsername},i.audience=a.audience||e.location.protocol+"//"+e.location.host,i.prefix=a.prefix||"webmaker-",i.timeout=a.timeout||10,i.localStorageKey=i.prefix+"login",i.csrfToken=a.csrfToken,i.withCredentials=a.withCredentials===!1?!1:!0,c&&u!==c&&(document.cookie=s.serialize("webmakerReferral",c,o),u=c),i.clearReferrerCookie=function(){var e=o;e.expires=new Date(Date.now()-1e4),document.cookie=s.serialize("webmakerReferral","expire",e)},i.handleNewUserUI=a.handleNewUserUI===!1?!1:!0,i.analytics={},i.analytics.webmakerNewUserCancelled=function(){n.event("Webmaker New User Cancelled")},i.modal={},i.modal.element=document.getElementById("webmaker-login-new-user"),i.modal.dismissSelector="[data-dismiss]",i.modal.createSelector=".create-user",i.modal.createBtnOnClick=function(){},i.modal.checkUsernameOnChange=function(){var e=i.modal.element.querySelector(".username-taken-error"),t=i.modal.element.querySelector(".username-invalid-error"),r=i.modal.element.querySelector(".username-required-error"),s=i.modal.element.querySelector(".username-group"),n=this.value;return n?void i.checkUsername(n,function(n,a){n&&"Username taken"===a?(s.classList.add("has-error"),s.classList.remove("has-success"),e.classList.remove("hidden"),r.classList.add("hidden"),t.classList.add("hidden")):n&&"Username invalid"===a?(s.classList.add("has-error"),s.classList.remove("has-success"),t.classList.remove("hidden"),e.classList.add("hidden"),r.classList.add("hidden")):(s.classList.remove("has-error"),s.classList.add("has-success"),e.classList.add("hidden"),r.classList.add("hidden"),t.classList.add("hidden"))}):(s.classList.remove("has-success"),s.classList.add("has-error"),e.classList.add("hidden"),r.classList.remove("hidden"),void t.classList.add("hidden"))},i.modal.setup=function(e){var t=i.modal.element.querySelector(i.modal.createSelector),r=i.modal.element.querySelectorAll(i.modal.dismissSelector),s=i.modal.element.querySelector(".username-group"),n=i.modal.element.querySelector(".agree-group"),a=i.modal.element.querySelector(".username-taken-error"),o=i.modal.element.querySelector(".username-required-error"),c=i.modal.element.querySelector(".username-invalid-error"),u=i.modal.element.querySelector(".agree-error"),l=i.modal.element.querySelector('[name="username"]'),d=i.modal.element.querySelector('[name="agreeToTerms"]'),m=i.modal.element.querySelector('[name="mailingList"]'),h=i.modal.element.querySelector("[name=supportedLocales]");t.removeEventListener("click",i.modal.createBtnOnClick,!1),l.addEventListener("change",i.modal.checkUsernameOnChange,!1),i.modal.createBtnOnClick=function(){var t=!1;d.checked||(n.classList.add("has-error"),u.classList.remove("hidden"),t=!0),l.value||(s.classList.remove("has-success"),s.classList.add("has-error"),a.classList.add("hidden"),o.classList.remove("hidden"),c.classList.add("hidden"),t=!0),t||i.checkUsername(l.value,function(t,r){t&&"Username taken"===r?(s.classList.add("has-error"),s.classList.remove("has-success"),a.classList.remove("hidden"),o.classList.add("hidden"),c.classList.add("hidden")):t&&"Username invalid"===r?(s.classList.add("has-error"),s.classList.remove("has-success"),c.classList.remove("hidden"),a.classList.add("hidden"),o.classList.add("hidden")):i.createUser({assertion:e,user:{username:l.value,mailingList:m.checked,prefLocale:h.value}},function(e){return e?void console.error(e):(a.classList.add("hidden"),o.classList.add("hidden"),c.classList.add("hidden"),u.classList.add("hidden"),s.classList.remove("has-error"),s.classList.remove("has-success"),n.classList.remove("has-error"),void i.modal.close())})})};for(var f=0;f<r.length;f++)r[f].removeEventListener("click",i.modal.close,!1),r[f].addEventListener("click",i.modal.close,!1);t.addEventListener("click",i.modal.createBtnOnClick,!1)},i.modal.open=function(){i.modal.element.classList.add("in"),i.modal.element.style.display="block",i.modal.element.setAttribute("aria-hidden",!1)},i.modal.close=function(e){e&&i.analytics.webmakerNewUserCancelled(),i.modal.element.classList.remove("in"),i.modal.element.style.display="none",i.modal.element.setAttribute("aria-hidden",!0)},i.on=function(e,t){i.emitter.addListener(e,t)},i.off=function(e,t){i.emitter.removeListener(e,t)},i.checkEmail=function(e,t){var r=new XMLHttpRequest,s=JSON.stringify({email:e});r.open("POST",i.urls.checkEmail,!0),r.withCredentials=i.withCredentials,r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("X-CSRF-Token",i.csrfToken),r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=JSON.parse(r.responseText);e.exists?t(!0,"account-exists"):t(!1,"no-account")}else 4===r.readyState&&r.status&&(r.status>=400||r.status<200)?(i.emitter.emitEvent("error",[r.responseText]),t(!1,"error-checking-email")):4===r.readyState&&(i.emitter.emitEvent("error",["Looks like "+i.urls.checkEmail+" is not responding..."]),t(!1,"error-checking-email"))},r.send(s)},i.checkUsername=function(e,t){if(!r.test(e))return t(!0,"Username invalid");var s=new XMLHttpRequest,n=JSON.stringify({username:e});s.open("POST",i.urls.checkUsername,!0),s.withCredentials=i.withCredentials,s.setRequestHeader("Content-type","application/json"),s.setRequestHeader("X-CSRF-Token",i.csrfToken),s.onreadystatechange=function(){if(4===s.readyState&&200===s.status){var e=JSON.parse(s.responseText);e.exists?t(!0,"Username taken"):t(!1,"Username not taken")}else 4===s.readyState&&s.status&&(s.status>=400||s.status<200)?(i.emitter.emit("error",s.responseText),t(!1,"Error checking username")):4===s.readyState&&(i.emitter.emit("error","Looks like "+i.urls.checkUsername+" is not responding..."),t(!1,"Error checking username"))},s.send(n)},i.createNewUser=function(e,t){e.user.referrer=u;var r=new XMLHttpRequest,s=JSON.stringify({audience:i.audience,user:e.user});t=t||function(){},r.open("POST",i.urls.createUser,!0),r.withCredentials=i.withCredentials,r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("X-CSRF-Token",i.csrfToken),r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=JSON.parse(r.responseText);e.user?(i.storage.set(e.user),i.emitter.emitEvent("login",[e.user,"user created"]),n.event("Webmaker New User Created",{nonInteraction:!0}),n.conversionGoal("WebmakerNewUserCreated"),i.clearReferrerCookie(),t(null,e.user)):(i.emitter.emitEvent("error",[r.responseText]),t(r.responseText))}else 4===r.readyState&&r.status&&(r.status>=400||r.status<200)?(i.emitter.emitEvent("error",[r.responseText]),t(r.responseText)):4===r.readyState&&(i.emitter.emitEvent("error",["Looks like "+i.urls.create+" is not responding..."]),t(r.responseText))},r.send(s)},i.createUser=function(e,t){e.user.referrer=u;var r=new XMLHttpRequest,s=JSON.stringify({assertion:e.assertion,audience:i.audience,user:e.user});t=t||function(){},r.open("POST",i.urls.create,!0),r.withCredentials=i.withCredentials,r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("X-CSRF-Token",i.csrfToken),r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=JSON.parse(r.responseText);e.user?(i.storage.set(e.user),i.emitter.emit("login",e.user,"user created"),n.event("Webmaker New User Created",{nonInteraction:!0}),n.conversionGoal("WebmakerNewUserCreated"),i.clearReferrerCookie(),t(null,e.user)):(i.emitter.emit("error",r.responseText),t(r.responseText))}else 4===r.readyState&&r.status&&(r.status>=400||r.status<200)?(i.emitter.emit("error",r.responseText),t(r.responseText)):4===r.readyState&&(i.emitter.emit("error","Looks like "+i.urls.create+" is not responding..."),t(r.responseText))},r.send(s)},i.verify=function(){i.storage.get()&&i.emitter.emit("login",i.storage.get(),"restored");var e=i.storage.get("email"),t=new XMLHttpRequest;t.open("POST",i.urls.verify,!0),t.withCredentials=i.withCredentials,t.setRequestHeader("Content-type","application/json"),t.setRequestHeader("X-CSRF-Token",i.csrfToken),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var r=JSON.parse(t.responseText);e&&r.email===e?(i.emitter.emit("login",r.user,"verified"),i.storage.set(r.user)):r.user?(i.emitter.emit("login",r.user,"email mismatch"),i.storage.set(r.user)):(i.emitter.emit("logout"),i.storage.clear())}else 4===t.readyState&&t.status&&(t.status>=400||t.status<200)?i.emitter.emit("error",t.responseText):4===t.readyState&&i.emitter.emit("error","Looks like "+i.urls.verify+" is not responding...")},t.send()},i.request=function(t,r){n.event("Webmaker Request Token Clicked"),e.removeEventListener("focus",i.verify,!1);var s=new XMLHttpRequest,a=JSON.stringify({email:t});if(i.timeout)var o=setTimeout(function(){s.abort(),i.emitter.emitEvent("error",["The request for a token timed out after "+i.timeout+" seconds"])},1e3*i.timeout);s.open("POST",i.urls.request,!0),s.withCredentials=i.withCredentials,s.setRequestHeader("Content-type","application/json"),s.setRequestHeader("X-CSRF-Token",i.csrfToken),s.onreadystatechange=function(){if(i.timeout&&o&&clearTimeout(o),4===s.readyState&&200===s.status){var e=JSON.parse(s.responseText);if(e.error||e.err)return i.emitter.emitEvent("error",[e.error||e.err]),r(e.error||e.err);if(e.status)return i.storage.set(e.user),i.emitter.emitEvent("tokenrequested",[e.status]),n.event("Webmaker Login Token Requested"),r(null)}else 4===s.readyState&&s.status&&(s.status>=400||s.status<200)?(i.emitter.emitEvent("error",[s.responseText]),r(s.responseText)):4===s.readyState&&(i.emitter.emitEvent("error",["Looks like "+i.urls.request+" is not responding..."]),r("no response"))},s.send(a)},i.authenticateToken=function(t,r){if(!t||!r)return void i.emitter.emitEvent("error",["missing token or email"]);n.event("Webmaker Authenticate Token Clicked"),e.removeEventListener("focus",i.verify,!1);var s=new XMLHttpRequest,a=JSON.stringify({email:t,token:r});if(i.timeout)var o=setTimeout(function(){s.abort(),i.emitter.emitEvent("error",["The login request timed out after "+i.timeout+" seconds"])},1e3*i.timeout);s.open("POST",i.urls.authenticateToken,!0),s.withCredentials=i.withCredentials,s.setRequestHeader("Content-type","application/json"),s.setRequestHeader("X-CSRF-Token",i.csrfToken),s.onreadystatechange=function(){if(i.timeout&&o&&clearTimeout(o),4===s.readyState&&200===s.status){var e=JSON.parse(s.responseText);e.error&&i.emitter.emitEvent("error",[e.error]),e.user&&(i.storage.set(e.user),i.emitter.emitEvent("tokenlogin",[e.user]),n.event("Webmaker Login Token Succeeded")),e.err&&i.emitter.emitEvent("error",[e.err])}else 4===s.readyState&&s.status&&(s.status>=400||s.status<200)?i.emitter.emitEvent("error",[s.responseText]):4===s.readyState&&i.emitter.emitEvent("error",["Looks like "+i.urls.authenticateToken+" is not responding..."])},s.send(a)},i.login=function(){return e.navigator.id?(n.event("Webmaker Login Clicked"),e.removeEventListener("focus",i.verify,!1),void e.navigator.id.get(function(e){if(!e)return i.emitter.emit("error","No assertion was received"),void n.event("Persona Login Cancelled");n.event("Persona Login Succeeded");var t={referrer:u},r=new XMLHttpRequest,s=JSON.stringify({audience:i.audience,assertion:e,user:t});if(i.timeout)var a=setTimeout(function(){r.abort(),i.emitter.emit("error","The request for a token timed out after "+i.timeout+" seconds")},1e3*i.timeout);r.open("POST",i.urls.authenticate,!0),r.withCredentials=i.withCredentials,r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("X-CSRF-Token",i.csrfToken),r.onreadystatechange=function(){if(i.timeout&&a&&clearTimeout(a),4===r.readyState&&200===r.status){var t=JSON.parse(r.responseText);t.error&&i.emitter.emit("error",t.error),t.user&&(i.storage.set(t.user),i.emitter.emit("login",t.user),n.event("Webmaker Login Succeeded"),i.clearReferrerCookie()),t.email&&!t.user&&(i.emitter.emit("newuser",e,t.email),n.event("Webmaker New User Started"),i.handleNewUserUI&&(i.modal.setup(e,t.email),i.modal.open())),t.err&&i.emitter.emit("error",t.err)}else 4===r.readyState&&r.status&&(r.status>=400||r.status<200)?i.emitter.emit("error",r.responseText):4===r.readyState&&i.emitter.emit("error","Looks like "+i.urls.authenticate+" is not responding...")},r.send(s)},{backgroundColor:"#E3EAEE",privacyPolicy:"https://webmaker.org/privacy",siteLogo:"https://stuff.webmaker.org/persona-assets/logo-webmaker.png",siteName:"Mozilla Webmaker",termsOfService:"https://webmaker.org/terms"})):void console.error("No persona found. Did you include include.js?")},i.logout=function(){n.event("Webmaker Logout Clicked"),e.removeEventListener("focus",i.verify,!1);var t=new XMLHttpRequest;t.open("POST",i.urls.logout,!0),t.withCredentials=i.withCredentials,t.setRequestHeader("X-CSRF-Token",i.csrfToken),t.onreadystatechange=function(){4===t.readyState&&200===t.status?(i.emitter.emit("logout"),i.storage.clear()):4===t.readyState&&t.status&&(t.status>=400||t.status<200)?i.emitter.emit("error",t.responseText):4===t.readyState&&i.emitter.emit("error","Looks like "+i.urls.logout+" is not responding...")},t.send(null)},i.storage={get:function(e){var t=JSON.parse(localStorage.getItem(i.localStorageKey));if(t)return e?t[e]:t},set:function(e){var t=JSON.parse(localStorage.getItem(i.localStorageKey))||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);localStorage.setItem(i.localStorageKey,JSON.stringify(t))},clear:function(){delete localStorage[i.localStorageKey]}}}}var r=/^[abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\-]{1,20}$/;if("function"==typeof define&&define.amd)define("webmaker-auth-client",["eventEmitter/EventEmitter","cookie-js/cookie","analytics"],t);else if("object"==typeof module&&module.exports){var s=require("cookie"),n=require("events").EventEmitter,a=require("webmaker-analytics");module.exports=t(n,s,a)}else e.WebmakerAuthClient=t(e.EventEmitter,e.cookiejs,e.analytics)}(window);